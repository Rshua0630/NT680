/**
    IPL dzoom table mn34120.

    @file       ipl_dzoom_tab_mn34120_ff.c
    @ingroup    mISYSAlg
    @note       Nothing (or anything need to be mentioned).

    Copyright   Novatek Microelectronics Corp. 2011.  All rights reserved.
*/

#include "ipl_mn34120_ff_int.h"

static IPL_DZOOM_SEL_INFO sensor_mode_dzoom_table[] = {
//special case for sensor auto gen
	//{SENSOR_MODE_1,61,8,0,0,IPL_CROP},
};
const static UINT32 VDOZOOM_INFOR_MODE_1_TABLE[20][DZOOM_ITEM_MAX] = {
 {4624, 3488, 4624, 3488, 4624, 3488, 4624, 3488}, //1
    {4624, 3488, 4624, 3488, 4468, 3372, 4468, 3368}, //2
    {4624, 3488, 4624, 3488, 4316, 3256, 4316, 3256}, //3
    {4624, 3488, 4624, 3488, 4168, 3144, 4168, 3144}, //4
    {4624, 3488, 4624, 3488, 4024, 3036, 4024, 3036}, //5
    {4624, 3488, 4624, 3488, 3888, 2932, 3888, 2932}, //6
    {4624, 3488, 4624, 3488, 3756, 2832, 3756, 2832}, //7
    {4624, 3488, 4624, 3488, 3628, 2736, 3628, 2736}, //8
    {4624, 3488, 4524, 3412, 3504, 2644, 3504, 2644}, //9
    {4624, 3488, 4404, 3324, 3384, 2556, 3384, 2552}, //10
    {4624, 3488, 4288, 3236, 3268, 2468, 3268, 2468}, //11
    {4624, 3488, 4180, 3152, 3160, 2384, 3160, 2384}, //12
    {4624, 3488, 4072, 3072, 3052, 2304, 3052, 2300}, //13
    {4624, 3488, 3968, 2992, 2948, 2224, 2948, 2224}, //14
    {4624, 3488, 3868, 2916, 2848, 2148, 2848, 2148}, //15
    {4624, 3488, 3768, 2844, 2748, 2076, 2748, 2072}, //16
    {4624, 3488, 3676, 2772, 2656, 2004, 2656, 2004}, //17
    {4624, 3488, 3584, 2704, 2564, 1936, 2564, 1936}, //18
    {4624, 3488, 3496, 2636, 2476, 1868, 2476, 1868}, //19
    {4624, 3488, 3412, 2572, 2392, 1804, 2392, 1804}, //20
};
//mode22,  4port, 4632x3488, full scan,     10bit, 13.2fps,  (4:3)
const static UINT32 VDOZOOM_INFOR_MODE_2_TABLE[61][DZOOM_ITEM_MAX] =
{
    {4624, 3488, 4624, 3488, 4624, 3488, 4624, 3488}, //1
    {4624, 3488, 4624, 3488, 4468, 3372, 4468, 3368}, //2
    {4624, 3488, 4624, 3488, 4316, 3256, 4316, 3256}, //3
    {4624, 3488, 4624, 3488, 4168, 3144, 4168, 3144}, //4
    {4624, 3488, 4624, 3488, 4024, 3036, 4024, 3036}, //5
    {4624, 3488, 4624, 3488, 3888, 2932, 3888, 2932}, //6
    {4624, 3488, 4624, 3488, 3756, 2832, 3756, 2832}, //7
    {4624, 3488, 4624, 3488, 3628, 2736, 3628, 2736}, //8
    {4624, 3488, 4524, 3412, 3504, 2644, 3504, 2644}, //9
    {4624, 3488, 4404, 3324, 3384, 2556, 3384, 2552}, //10
    {4624, 3488, 4288, 3236, 3268, 2468, 3268, 2468}, //11
    {4624, 3488, 4180, 3152, 3160, 2384, 3160, 2384}, //12
    {4624, 3488, 4072, 3072, 3052, 2304, 3052, 2300}, //13
    {4624, 3488, 3968, 2992, 2948, 2224, 2948, 2224}, //14
    {4624, 3488, 3868, 2916, 2848, 2148, 2848, 2148}, //15
    {4624, 3488, 3768, 2844, 2748, 2076, 2748, 2072}, //16
    {4624, 3488, 3676, 2772, 2656, 2004, 2656, 2004}, //17
    {4624, 3488, 3584, 2704, 2564, 1936, 2564, 1936}, //18
    {4624, 3488, 3496, 2636, 2476, 1868, 2476, 1868}, //19
    {4624, 3488, 3412, 2572, 2392, 1804, 2392, 1804}, //20
};
const static UINT32 VDOZOOM_INFOR_MODE_3_TABLE[61][DZOOM_ITEM_MAX] =
{
    {2304, 1296, 2112, 1188, 2112, 1188, 2304, 1296}, //1
    {2224, 1252, 2112, 1188, 2112, 1188, 2224, 1252}, //2
    {2148, 1208, 2112, 1188, 2112, 1188, 2148, 1208}, //3
    {2112, 1188, 2112, 1188, 2076, 1168, 2076, 1168}, //4
    {2112, 1188, 2112, 1188, 2004, 1128, 2004, 1128}, //5
    {2112, 1188, 2112, 1188, 1936, 1088, 1936, 1088}, //6
    {2112, 1188, 2112, 1188, 1872, 1052, 1872, 1052}, //7
    {2112, 1188, 2112, 1188, 1808, 1016, 1808, 1016}, //8
    {2112, 1188, 2112, 1188, 1748,  984, 1748,  984}, //9
    {2112, 1188, 2112, 1188, 1688,  948, 1688,  948}, //10
    {2112, 1188, 2112, 1188, 1628,  916, 1628,  916}, //11
    {2112, 1188, 2112, 1188, 1572,  884, 1572,  884}, //12
    {2112, 1188, 2112, 1188, 1520,  856, 1520,  856}, //13
    {2112, 1188, 2112, 1188, 1468,  824, 1468,  824}, //14
    {2112, 1188, 2112, 1188, 1420,  800, 1420,  796}, //15
    {2112, 1188, 2112, 1188, 1368,  768, 1368,  772}, //16
    {2112, 1188, 2112, 1188, 1324,  744, 1324,  744}, //17
    {2112, 1188, 2112, 1188, 1280,  720, 1280,  720}, //18
    {2112, 1188, 2112, 1188, 1236,  696, 1236,  696}, //19
    {2112, 1188, 2112, 1188, 1192,  672, 1192,  672}, //20
};
//mode4,   6port, 2314x1304, V2/2mix H2mix, 12bit, 29.97fps, (16:9)
const static UINT32 VDOZOOM_INFOR_MODE_4_TABLE[20][DZOOM_ITEM_MAX] = {
   {2304, 1296, 2112, 1188, 2112, 1188, 2304, 1296}, //1
    {2224, 1252, 2112, 1188, 2112, 1188, 2224, 1252}, //2
    {2148, 1208, 2112, 1188, 2112, 1188, 2148, 1208}, //3
    {2112, 1188, 2112, 1188, 2076, 1168, 2076, 1168}, //4
    {2112, 1188, 2112, 1188, 2004, 1128, 2004, 1128}, //5
    {2112, 1188, 2112, 1188, 1936, 1088, 1936, 1088}, //6
    {2112, 1188, 2112, 1188, 1872, 1052, 1872, 1052}, //7
    {2112, 1188, 2112, 1188, 1808, 1016, 1808, 1016}, //8
    {2112, 1188, 2112, 1188, 1748,  984, 1748,  984}, //9
    {2112, 1188, 2112, 1188, 1688,  948, 1688,  948}, //10
    {2112, 1188, 2112, 1188, 1628,  916, 1628,  916}, //11
    {2112, 1188, 2112, 1188, 1572,  884, 1572,  884}, //12
    {2112, 1188, 2112, 1188, 1520,  856, 1520,  856}, //13
    {2112, 1188, 2112, 1188, 1468,  824, 1468,  824}, //14
    {2112, 1188, 2112, 1188, 1420,  800, 1420,  796}, //15
    {2112, 1188, 2112, 1188, 1368,  768, 1368,  772}, //16
    {2112, 1188, 2112, 1188, 1324,  744, 1324,  744}, //17
    {2112, 1188, 2112, 1188, 1280,  720, 1280,  720}, //18
    {2112, 1188, 2112, 1188, 1236,  696, 1236,  696}, //19
    {2112, 1188, 2112, 1188, 1192,  672, 1192,  672}, //20
};
const static UINT32 VDOZOOM_INFOR_MODE_5_TABLE[20][DZOOM_ITEM_MAX] = {
	{1280,  720, 1280,  720, 1280,  720, 1280,  720}, //1
{1280,  720, 1280,  720, 1236,  696, 1236,  696}, //2
{1280,  720, 1280,  720, 1196,  672, 1196,  672}, //3
{1280,  720, 1280,  720, 1152,  648, 1152,  648}, //4
{1280,  720, 1280,  720, 1116,  628, 1116,  628}, //5
{1280,  720, 1280,  720, 1076,  604, 1076,  604}, //6
{1280,  720, 1280,  720, 1040,  584, 1040,  584}, //7
{1280,  720, 1280,  720, 1004,  564, 1004,  564}, //8
{1280,  720, 1280,  720,  972,  544,  972,  544}, //9
{1280,  720, 1280,  720,  936,  528,  936,  528}, //10
{1280,  720, 1280,  720,  904,  508,  904,  508}, //11
{1280,  720, 1280,  720,  876,  492,  876,  492}, //12
{1280,  720, 1280,  720,  844,  476,  844,  476}, //13
{1280,  720, 1280,  720,  816,  460,  816,  460}, //14
{1280,  720, 1280,  720,  788,  444,  788,  444}, //15
{1280,  720, 1280,  720,  760,  428,  760,  428}, //16
{1280,  720, 1280,  720,  736,  412,  736,  412}, //17
{1280,  720, 1280,  720,  712,  400,  712,  400}, //18
{1280,  720, 1280,  720,  684,  384,  684,  384}, //19
{1280,  720, 1280,  720,  664,  372,  664,  372}, //20

};

//mode12,  8port, 4712x2702, full scan,     10bit, 30fps,    (16:9)
const static UINT32 VDOZOOM_INFOR_MODE_7_TABLE[61][DZOOM_ITEM_MAX] =
{
{4632, 2600, 2560, 1440, 2560, 1440, 4632, 2600}, //1
{4476, 2512, 2560, 1440, 2560, 1440, 4476, 2512}, //2
{4320, 2424, 2560, 1440, 2560, 1440, 4320, 2424}, //3
{4176, 2344, 2560, 1440, 2560, 1440, 4176, 2344}, //4
{4032, 2264, 2560, 1440, 2560, 1440, 4032, 2264}, //5
{3896, 2188, 2560, 1440, 2560, 1440, 3896, 2188}, //6
{3764, 2112, 2560, 1440, 2560, 1440, 3764, 2112}, //7
{3636, 2040, 2560, 1440, 2560, 1440, 3636, 2040}, //8
{3512, 1972, 2560, 1440, 2560, 1440, 3512, 1972}, //9
{3392, 1904, 2560, 1440, 2560, 1440, 3392, 1904}, //10
{3276, 1840, 2560, 1440, 2560, 1440, 3276, 1840}, //11
{3164, 1776, 2560, 1440, 2560, 1440, 3164, 1776}, //12
{3056, 1716, 2560, 1440, 2560, 1440, 3056, 1716}, //13
{2952, 1656, 2560, 1440, 2560, 1440, 2952, 1656}, //14
{2852, 1600, 2560, 1440, 2560, 1440, 2852, 1600}, //15
{2756, 1544, 2560, 1440, 2560, 1440, 2756, 1544}, //16
{2660, 1492, 2560, 1440, 2560, 1440, 2660, 1492}, //17
{2568, 1444, 2560, 1440, 2560, 1440, 2568, 1444}, //18
{2560, 1440, 2560, 1440, 2484, 1396, 2484, 1392}, //19
{2560, 1440, 2560, 1440, 2396, 1348, 2396, 1344}, //20
};
//mode2,   8port, 4712x3590, full scan,     10bit, 22.32fps, (4:3)
const static UINT32 VDOZOOM_INFOR_MODE_8_TABLE[61][DZOOM_ITEM_MAX] =
{
{4632, 3488, 2880, 2160, 2880, 2160, 4632, 3488}, //1
{4476, 3368, 2880, 2160, 2880, 2160, 4476, 3368}, //2
{4320, 3256, 2880, 2160, 2880, 2160, 4320, 3256}, //3
{4176, 3144, 2880, 2160, 2880, 2160, 4176, 3144}, //4
{4016, 3012, 2880, 2160, 2880, 2160, 4032, 3036}, //5
{3896, 2932, 2880, 2160, 2880, 2160, 3896, 2932}, //6
{3764, 2832, 2880, 2160, 2880, 2160, 3764, 2832}, //7
{3636, 2736, 2880, 2160, 2880, 2160, 3636, 2736}, //8
{3512, 2644, 2880, 2160, 2880, 2160, 3512, 2644}, //9
{3392, 2552, 2880, 2160, 2880, 2160, 3392, 2552}, //10
{3276, 2468, 2880, 2160, 2880, 2160, 3276, 2468}, //11
{3164, 2384, 2880, 2160, 2880, 2160, 3164, 2384}, //12
{3056, 2300, 2880, 2160, 2880, 2160, 3056, 2300}, //13
{2952, 2224, 2880, 2160, 2880, 2160, 2952, 2224}, //14
{2880, 2160, 2880, 2160, 2852, 2140, 2852, 2148}, //15
{2880, 2160, 2880, 2160, 2756, 2068, 2756, 2072}, //16
{2880, 2160, 2880, 2160, 2660, 1996, 2660, 2004}, //17
{2880, 2160, 2880, 2160, 2568, 1928, 2568, 1936}, //18
{2880, 2160, 2880, 2160, 2484, 1864, 2484, 1868}, //19
{2880, 2160, 2880, 2160, 2396, 1796, 2396, 1804}, //20
};
//mode3,   4port, 2356x1804, V2/2mix H2mix, 12bit, 29.97fps, (4:3), for photo preview
const static UINT32 VDOZOOM_INFOR_MODE_9_TABLE[61][DZOOM_ITEM_MAX] =
{
    {2312, 1736, 1584, 1188, 1584, 1188, 2312, 1736}, //1
    {2232, 1676, 1584, 1188, 1584, 1188, 2232, 1676}, //2
    {2156, 1620, 1584, 1188, 1584, 1188, 2156, 1620}, //3
    {2084, 1564, 1584, 1188, 1584, 1188, 2084, 1564}, //4
    {2012, 1512, 1584, 1188, 1584, 1188, 2012, 1512}, //5
    {1944, 1460, 1584, 1188, 1584, 1188, 1944, 1460}, //6
    {1876, 1412, 1584, 1188, 1584, 1188, 1876, 1412}, //7
    {1812, 1364, 1584, 1188, 1584, 1188, 1812, 1364}, //8
    {1752, 1316, 1584, 1188, 1584, 1188, 1752, 1316}, //9
    {1692, 1272, 1584, 1188, 1584, 1188, 1692, 1272}, //10
    {1636, 1228, 1584, 1188, 1584, 1188, 1636, 1228}, //11
    {1584, 1188, 1584, 1188, 1580, 1184, 1580, 1184}, //12
    {1584, 1188, 1584, 1188, 1524, 1144, 1524, 1144}, //13
    {1584, 1188, 1584, 1188, 1472, 1104, 1472, 1108}, //14
    {1584, 1188, 1584, 1188, 1424, 1068, 1424, 1068}, //15
    {1584, 1188, 1584, 1188, 1376, 1032, 1376, 1032}, //16
    {1584, 1188, 1584, 1188, 1328,  996, 1328,  996}, //17
    {1584, 1188, 1584, 1188, 1284,  964, 1284,  964}, //18
    {1584, 1188, 1584, 1188, 1240,  932, 1240,  932}, //19
    {1584, 1188, 1584, 1188, 1196,  896, 1196,  900}, //20
};

UINT32 *SenMode2TblFp_mn34120_ff(UINT32 id, UINT32 *DzMaxidx)
{
	UINT32 *Ptr = NULL;
	UINT32 tbl_size,i;
	ER rt = E_OK;
	SEN_STATUS_PARAM sen_status = {0};
	UINT32 sen_mode;

	sen_mode = IPL_CtrlGetInfor(id, IPLCTRL_SEN_MODE);
	sen_status.sensor_mode = IPL_CtrlGetInfor(id, IPLCTRL_SEN_MODE);
	rt = sensor_get_info(IPL_UTI_CONV2_SEN_ID(IPL_CtrlGetInfor(id, IPLCTRL_MF_BASE_ID)), SEN_GET_STATUS, (void *)&sen_status);
	if (rt != E_OK) {
		DBG_ERR("Get Sensor Status Fail id:%d, Sensor_Mode: %d\r\n", IPL_CtrlGetInfor(id, IPLCTRL_SEN_MODE));
		return NULL;
	}


	//special case for manual select dzoom table
	switch (sen_mode) {
	case SENSOR_MODE_1:

		Ptr = (UINT32 *)&VDOZOOM_INFOR_MODE_1_TABLE[0][0];
		*DzMaxidx = (sizeof(VDOZOOM_INFOR_MODE_1_TABLE) / 4 / DZOOM_ITEM_MAX) - 1;
		break;
	case SENSOR_MODE_2:
		Ptr = (UINT32 *)&VDOZOOM_INFOR_MODE_2_TABLE[0][0];
		*DzMaxidx = (sizeof(VDOZOOM_INFOR_MODE_2_TABLE) / 4 / DZOOM_ITEM_MAX) - 1;
		break;
	case SENSOR_MODE_3:
		Ptr = (UINT32 *)&VDOZOOM_INFOR_MODE_3_TABLE[0][0];
		*DzMaxidx = (sizeof(VDOZOOM_INFOR_MODE_3_TABLE) / 4 / DZOOM_ITEM_MAX) - 1;
		break;
	case SENSOR_MODE_4:
		Ptr = (UINT32 *)&VDOZOOM_INFOR_MODE_4_TABLE[0][0];
		*DzMaxidx = (sizeof(VDOZOOM_INFOR_MODE_4_TABLE) / 4 / DZOOM_ITEM_MAX) - 1;
		break;
	case SENSOR_MODE_5:

		Ptr = (UINT32 *)&VDOZOOM_INFOR_MODE_5_TABLE[0][0];
		*DzMaxidx = (sizeof(VDOZOOM_INFOR_MODE_5_TABLE) / 4 / DZOOM_ITEM_MAX) - 1;
		break;


	case SENSOR_MODE_6:
		Ptr = (UINT32 *)&VDOZOOM_INFOR_MODE_7_TABLE[0][0];
		*DzMaxidx = (sizeof(VDOZOOM_INFOR_MODE_7_TABLE) / 4 / DZOOM_ITEM_MAX) - 1;
		break;

	case SENSOR_MODE_7:
		Ptr = (UINT32 *)&VDOZOOM_INFOR_MODE_8_TABLE[0][0];
		*DzMaxidx = (sizeof(VDOZOOM_INFOR_MODE_8_TABLE) / 4 / DZOOM_ITEM_MAX) - 1;
		break;

	case SENSOR_MODE_8:
		Ptr = (UINT32 *)&VDOZOOM_INFOR_MODE_9_TABLE[0][0];
		*DzMaxidx = (sizeof(VDOZOOM_INFOR_MODE_9_TABLE) / 4 / DZOOM_ITEM_MAX) - 1;
		break;
	default:
		Ptr = NULL;
		*DzMaxidx = 0;
		break;
	}

	tbl_size = sizeof(sensor_mode_dzoom_table) / sizeof(IPL_DZOOM_SEL_INFO);
	//auto gen dzoom table
	if(tbl_size == 0){
		//use default setting
		Ptr = ChkSenModeTbl(id, &sen_status.sensor_info, Ptr, DzMaxidx, NULL);
	} else {
		for(i=0;i<tbl_size;i++){
			if(sensor_mode_dzoom_table[i].mode == sen_mode){
				Ptr = ChkSenModeTbl(id, &sen_status.sensor_info, Ptr, DzMaxidx, &sensor_mode_dzoom_table[i]);
			} else {
				//use default setting
				Ptr = ChkSenModeTbl(id, &sen_status.sensor_info, Ptr, DzMaxidx, NULL);
			}
		}
	}
	return Ptr;
}
