//This source code is generated by UI Designer Studio.

#include "UIFramework.h"
#include "UIFrameworkExt.h"
#include "UIGraphics.h"
#include "NVTToolCommand.h"
#include "UIMenuWndWiFiQRCodeScanRes.c"
#include "UIMenuWndWiFiQRCodeScan.h"
#include "PrjCfg.h"
#include "UIFlow.h"

//---------------------UIMenuWndWiFiQRCodeScanCtrl Debug Definition -----------------------------
#define _UIMENUWNDWIFIQRCODESCAN_ERROR_MSG        1
#define _UIMENUWNDWIFIQRCODESCAN_TRACE_MSG        0

#if (_UIMENUWNDWIFIQRCODESCAN_ERROR_MSG&(PRJ_DBG_LVL>=PRJ_DBG_LVL_ERR))
#define UIMenuWndWiFiQRCodeScanErrMsg(...)            debug_msg ("^R UIMenuWndWiFiQRCodeScan: "__VA_ARGS__)
#else
#define UIMenuWndWiFiQRCodeScanErrMsg(...)
#endif

#if (_UIMENUWNDWIFIQRCODESCAN_TRACE_MSG&(PRJ_DBG_LVL>=PRJ_DBG_LVL_TRC))
#define UIMenuWndWiFiQRCodeScanTraceMsg(...)          debug_msg ("^B UIMenuWndWiFiQRCodeScan: "__VA_ARGS__)
#else
#define UIMenuWndWiFiQRCodeScanTraceMsg(...)
#endif

//---------------------UIMenuWndWiFiQRCodeScanCtrl Global Variables -----------------------------

//---------------------UIMenuWndWiFiQRCodeScanCtrl Prototype Declaration  -----------------------

//---------------------UIMenuWndWiFiQRCodeScanCtrl Public API  ----------------------------------

//---------------------UIMenuWndWiFiQRCodeScanCtrl Private API  ---------------------------------
//---------------------UIMenuWndWiFiQRCodeScanCtrl Control List---------------------------
CTRL_LIST_BEGIN(UIMenuWndWiFiQRCodeScan)
CTRL_LIST_ITEM(UIMenuWndWiFiQRCodeScan_StatusTXT_QRCodeScan)
CTRL_LIST_END

//----------------------UIMenuWndWiFiQRCodeScanCtrl Event---------------------------
INT32 UIMenuWndWiFiQRCodeScan_OnOpen(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnClose(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnChildClose(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnKeyMenu(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnKeyUp(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnKeyDown(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnKeyEnter(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnKeyShutter2(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnKeyMode(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnBattery(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnTimer(VControl *, UINT32, UINT32 *);
INT32 UIMenuWndWiFiQRCodeScan_OnBackgroundDone(VControl *, UINT32, UINT32 *);
EVENT_BEGIN(UIMenuWndWiFiQRCodeScan)
EVENT_ITEM(NVTEVT_OPEN_WINDOW,UIMenuWndWiFiQRCodeScan_OnOpen)
EVENT_ITEM(NVTEVT_CLOSE_WINDOW,UIMenuWndWiFiQRCodeScan_OnClose)
EVENT_ITEM(NVTEVT_CHILD_CLOSE,UIMenuWndWiFiQRCodeScan_OnChildClose)
EVENT_ITEM(NVTEVT_KEY_MENU,UIMenuWndWiFiQRCodeScan_OnKeyMenu)
EVENT_ITEM(NVTEVT_KEY_UP,UIMenuWndWiFiQRCodeScan_OnKeyUp)
EVENT_ITEM(NVTEVT_KEY_DOWN,UIMenuWndWiFiQRCodeScan_OnKeyDown)
EVENT_ITEM(NVTEVT_KEY_ENTER,UIMenuWndWiFiQRCodeScan_OnKeyEnter)
EVENT_ITEM(NVTEVT_KEY_SHUTTER2,UIMenuWndWiFiQRCodeScan_OnKeyShutter2)
EVENT_ITEM(NVTEVT_KEY_MODE,UIMenuWndWiFiQRCodeScan_OnKeyMode)
EVENT_ITEM(NVTEVT_BATTERY,UIMenuWndWiFiQRCodeScan_OnBattery)
EVENT_ITEM(NVTEVT_TIMER,UIMenuWndWiFiQRCodeScan_OnTimer)
EVENT_ITEM(NVTEVT_BACKGROUND_DONE,UIMenuWndWiFiQRCodeScan_OnBackgroundDone)
EVENT_END

INT32 UIMenuWndWiFiQRCodeScan_OnOpen(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
	UxState_SetItemData(&UIMenuWndWiFiQRCodeScan_StatusTXT_QRCodeScanCtrl, 0, STATE_ITEM_STRID,  Txt_Pointer(UIRes_GetUserString(STRID_QRCODE_SCAN)));

    Ux_DefaultEvent(pCtrl,NVTEVT_OPEN_WINDOW,paramNum,paramArray);
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnClose(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    Ux_DefaultEvent(pCtrl,NVTEVT_CLOSE_WINDOW,paramNum,paramArray);
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnChildClose(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    Ux_DefaultEvent(pCtrl,NVTEVT_CHILD_CLOSE,paramNum,paramArray);
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnKeyMenu(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    Ux_DefaultEvent(pCtrl,NVTEVT_KEY_MENU,paramNum,paramArray);
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnKeyUp(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    Ux_DefaultEvent(pCtrl,NVTEVT_KEY_UP,paramNum,paramArray);
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnKeyDown(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    Ux_DefaultEvent(pCtrl,NVTEVT_KEY_DOWN,paramNum,paramArray);
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnKeyEnter(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    Ux_DefaultEvent(pCtrl,NVTEVT_KEY_ENTER,paramNum,paramArray);
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnKeyShutter2(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    Ux_DefaultEvent(pCtrl,NVTEVT_KEY_SHUTTER2,paramNum,paramArray);
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnKeyMode(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnBattery(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnTimer(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
    Ux_DefaultEvent(pCtrl,NVTEVT_TIMER,paramNum,paramArray);
    return NVTEVT_CONSUME;
}
INT32 UIMenuWndWiFiQRCodeScan_OnBackgroundDone(VControl *pCtrl, UINT32 paramNum, UINT32 *paramArray)
{
	NVTEVT event;
	//UINT32 status;

	event = paramArray[ONDONE_PARAM_INDEX_CMD];
	//status = paramArray[ONDONE_PARAM_INDEX_RET];
	//debug_msg("^G%s: NVTEVT_BKW_WIFI_ON = 0x%x\r\n", __func__, NVTEVT_BKW_WIFI_ON);
	//debug_msg("^G%s: event = 0x%x, status=%d\r\n", __func__, event, status);

	switch (event) {
	case NVTEVT_BKW_LIVESTREAM_ON:		
#if (WIFI_FUNC==ENABLE)		
        CHKPNT;
		UI_SetData(FL_NetWorkMode, NET_STATION_MODE);
		Ux_SendEvent(0, NVTEVT_EXE_WIFI_START, 0);
		if (UI_GetData(FL_WIFI_LINK) == WIFI_LINK_OK) {
			CHKPNT;
		    if (System_GetState(SYS_STATE_CURRMODE) != PRIMARY_MODE_MOVIE){
			    Ux_PostEvent(NVTEVT_SYSTEM_MODE, 1, PRIMARY_MODE_MOVIE);
			}
        	Ux_PostEvent(NVTEVT_EXE_MOVIE_STRM_START,0);			
			Ux_PostEvent(NVTEVT_OPEN_WINDOW, 1, &UIMenuWndWiFiLivestreamCtrl);
		}
#endif			
		break;
	}
	
    return NVTEVT_CONSUME;
}
//----------------------UIMenuWndWiFiQRCodeScan_StatusTXT_QRCodeScanCtrl Event---------------------------
EVENT_BEGIN(UIMenuWndWiFiQRCodeScan_StatusTXT_QRCodeScan)
EVENT_END

